# iconfont 常见问题

> 这篇是来自 forseti 下的 iconfont 常见问题总结

## icon 断点问题

最近一次遇到该问题的是黄刚，之前言河也曾经遇到过，具体表现为在 iconfont 网站和 sketch 上表现正常的 icon 在手机端出现的了断点。

可以看下图：

![icon断点示例](./images/icon-break-demo.png)

这个问题原因比较复杂，涉及到 sketch、svg、iconfont 转换、字体渲染等多方面知识，所以我也没有能得出非常具体的原因分析。

但解决这个问题的办法也很简单，只要**让设计师把 icon 对应的 svg 合并为一个图层**即可，这是通过请教瓶子得到的方法。

合并图层的原因在于 icon 上显示为断点的区域其实是图层叠加的部分，由于 sketch 和 iconfont 对于叠加区域的不同处理逻辑导致叠加区域被相互抵消。

我努力找到了一篇相对来说比较深奥的文章在解释这个问题，但是因为太深奥了我没看懂所以原文搬运

[惊！iconfont 布尔相减不显示！？](https://www.ui.cn/details/246569)

（是的，从标题开始我就没怎么弄懂，所以姑妄看之）

其实 iconfont 在[上传 icon 的页面](https://www.iconfont.cn/icons/upload)也明确提示了**如果有两个以上图形，或者有布尔关系的图形，请对图形合并并且扩展**，但由于提示内容比较靠下，所以一般可能不会被注意到。

反正不管怎么说，如果不打算精通 sketch 的话，记住**合并**两个字就够了。

但有一个问题还是没搞明白，为什么在 iconfont 网站上就是没问题的，或者说在 pc 上就是没问题的。

我也没搞懂，不过 iconfont 网站上预览 icon 可能使用的是更新一代的 symbol 方案，和我们的使用 iconfont 的方式有出入所以不足为信。

推荐使用`npm run docs:dev`后预览`公开/图标`页，可以验证，在 pc 上表现正常但在手机上表现异常，这可能和不同端的渲染逻辑有关。

为了证明不是手机的问题，我安装了另外一个 pc 端的字体管理软件[fontforge](https://github.com/fontforge/fontforge)，虽然它界面着实不敢恭维，甚至在 mac 下还存在高分辨率问题。但功能还是广受认可的。

使用 fontforge 打开我们的字体文件，切换到 iconfont 使用的 0 号平面的私用区（`E000-F8FF`）,可以发现在断点问题可以复现。

## icon 错位问题

这个问题比较古老了，相关的资料不太好找了，简要描述的话就是生成的 iconfont 发生了错位，比如上传的是图标是`乒`，实际显示的样子为`乓`。

这个问题的解决方案关键字为**Flatten**，设计师会知道该如何操作。

找到了一个类似问题的[链接](https://github.com/thx/iconfont-plus/issues/1315)
